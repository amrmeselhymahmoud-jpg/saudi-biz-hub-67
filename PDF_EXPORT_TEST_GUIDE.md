# ุฏููู ุงุฎุชุจุงุฑ ุชุตุฏูุฑ PDF - ููุงุชูุฑ ุงููุจูุนุงุช

## โ ุงูููุฏ ุฌุงูุฒ ููุงุฎุชุจุงุฑ!

ุชู ุชุทุจูู ุงูุญู ุงูููุงุฆู ููุดููุฉ ุชุตุฏูุฑ PDF. ุงูุขู ููููู ุงุฎุชุจุงุฑ ุงูููุฒุฉ ุจุซูุฉ.

---

## ๐ฏ ููููุฉ ุงูุงุฎุชุจุงุฑ

### ุงูุทุฑููุฉ ุงูุฃููู: ูู ุงูุฌุฏูู ูุจุงุดุฑุฉ

1. **ุงูุชุญ ุตูุญุฉ ููุงุชูุฑ ุงููุจูุนุงุช**
   - ุงูุชูู ุฅูู: `/sales-invoices`

2. **ุงุฎุชุฑ ูุงุชูุฑุฉ ูู ุงูุฌุฏูู**
   - ุงุจุญุซ ุนู ุงููุงุชูุฑุฉ ุงูุชู ุชุฑูุฏ ุชุตุฏูุฑูุง

3. **ุงูุชุญ ุงููุงุฆูุฉ ุงูููุณุฏูุฉ**
   - ุงููุฑ ุนูู ุฒุฑ ุงูููุงุท ุงูุซูุงุซุฉ (โฎ) ุจุฌุงูุจ ุงููุงุชูุฑุฉ

4. **ุงุฎุชุฑ "ุชุตุฏูุฑ PDF"**
   - ุงููุฑ ุนูู ุงูุฎูุงุฑ ุงูุฐู ูุญูู ุฃููููุฉ ุงูุชูุฒูู (โ)
   - ุงููุต: "ุชุตุฏูุฑ PDF"

5. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**
   ```
   โ ูุชู ุฅูุดุงุก ููู PDF
   โ ูุชู ุชูุฒููู ุชููุงุฆูุงู
   โ ุงุณู ุงูููู: invoice-[ุฑูู_ุงููุงุชูุฑุฉ]-[timestamp].pdf
   โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุชุตุฏูุฑ ุงููุงุชูุฑุฉ ุฅูู PDF ุจูุฌุงุญ"
   ```

---

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูู ูุงูุฐุฉ ุงูุนุฑุถ

1. **ุงูุชุญ ุตูุญุฉ ููุงุชูุฑ ุงููุจูุนุงุช**
   - ุงูุชูู ุฅูู: `/sales-invoices`

2. **ุงููุฑ ุนูู "ุนุฑุถ"**
   - ุงููุฑ ุนูู ุฃููููุฉ ุงูุนูู (๐) ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ

3. **ูู ูุงูุฐุฉ ุนุฑุถ ุงููุงุชูุฑุฉ**
   - ุณุชุฌุฏ ุฒุฑ "ุชุตุฏูุฑ PDF" ูู ุฃุณูู ุงููุงูุฐุฉ
   - ุจุฌุงูุจ ุฒุฑ "ุทุจุงุนุฉ" ู "ุฅุบูุงู"

4. **ุงููุฑ ุนูู "ุชุตุฏูุฑ PDF"**
   - ุงูุฒุฑ ูุญูู ุฃููููุฉ ุงูุชูุฒูู (โ)

5. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**
   ```
   โ ูุชู ุฅูุดุงุก ููู PDF
   โ ูุชู ุชูุฒููู ุชููุงุฆูุงู
   โ ุงููุงูุฐุฉ ุชุจูู ููุชูุญุฉ
   โ ุฑุณุงูุฉ ูุฌุงุญ ุชุธูุฑ
   ```

---

## ๐ ูุง ูุญุชููู PDF ุงูููุตุฏููุฑ

### 1. ุงูุฑุฃุณ (Header)
- โ ุฎูููุฉ ุฎุถุฑุงุก
- โ ุนููุงู: "ูุงุชูุฑุฉ ูุจูุนุงุช"
- โ ุฑูู ุงููุงุชูุฑุฉ

### 2. ุจูุงูุงุช ุงูุนููู (Customer Info)
- โ ุตูุฏูู ุฑูุงุฏู ูุงุชุญ
- โ ุงุณู ุงูุนููู
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุฅุฐุง ููุฌุฏ)
- โ ุฑูู ุงููุงุชู (ุฅุฐุง ููุฌุฏ)

### 3. ุชูุงุตูู ุงููุงุชูุฑุฉ (Invoice Details)
- โ ุงูุชุงุฑูุฎ
- โ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
- โ ุงูุญุงูุฉ (ููุดูุฑุฉ / ูุณูุฏุฉ)
- โ ุญุงูุฉ ุงูุฏูุน (ูุฏููุนุฉ / ุฌุฒุฆูุงู / ุบูุฑ ูุฏููุนุฉ)

### 4. ุฌุฏูู ุงูุฃุตูุงู (Items Table)
| ุงูุนููุฏ | ุงููุตู |
|--------|-------|
| # | ุงูุชุฑุชูุจ |
| ุงูููุชุฌ | ุงุณู ุงูููุชุฌ |
| ุงููููุฉ | ุนุฏุฏ ุงููุญุฏุงุช |
| ุงูุณุนุฑ | ุณุนุฑ ุงููุญุฏุฉ |
| ุงูุถุฑูุจุฉ | ูุณุจุฉ ุงูุถุฑูุจุฉ % |
| ุงูุฎุตู | ูููุฉ ุงูุฎุตู |
| ุงูุฅุฌูุงูู | ุงูุฅุฌูุงูู |

**ุชูุณูู ุงูุฌุฏูู:**
- โ ุฑุฃุณ ุฃุฎุถุฑ ุจูุต ุฃุจูุถ
- โ ุตููู ูุชุจุงุฏูุฉ ุงูุฃููุงู (ุฃุจูุถ / ุฑูุงุฏู ูุงุชุญ)
- โ ูุญุงุฐุงุฉ ูููู ูููุต ุงูุนุฑุจู
- โ ูุญุงุฐุงุฉ ูุณุท ููุฃุฑูุงู

### 5. ูุณู ุงููุฌุงููุน (Totals Section)
- โ ุงููุฌููุน ุงููุฑุนู
- โ ุงูุถุฑูุจุฉ (ุจููู ุฃุณูุฏ)
- โ ุงูุฎุตู (ุจููู ุฃุญูุฑ)
- โ **ุงูุฅุฌูุงูู** (ุจููู ุฃุฎุถุฑ - ุญุฌู ุฃูุจุฑ)
- โ ุงููุฏููุน
- โ ุงููุชุจูู (ุจููู ุจุฑุชูุงูู)

### 6. ุงูููุงุญุธุงุช (Notes)
- โ ุตูุฏูู ุฑูุงุฏู ูุงุชุญ
- โ ุญุฏูุฏ ุฎุถุฑุงุก
- โ ูุธูุฑ ููุท ุฅุฐุง ูุงูุช ููุงู ููุงุญุธุงุช

### 7. ุงูุชุฐููู (Footer)
- โ ุฎุท ูุงุตู ุฃุฎุถุฑ
- โ "ุดูุฑุงู ูุชุนุงูููู ูุนูุง" (ุจููู ุฃุฎุถุฑ)
- โ ุชุงุฑูุฎ ูููุช ุงูุชุตุฏูุฑ

---

## ๐ง ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

### ุงูููุชุจุงุช
```typescript
import jsPDF from "jspdf";
import "jspdf-autotable";
import { amiriRegularBase64 } from "@/utils/arabicFont";
```

### ุงูุฎุตุงุฆุต
- โ **ุงูุญุฌู**: A4 Portrait
- โ **ุงูุฎุท**: Amiri (ุนุฑุจู) ูุน fallback
- โ **ุงูุชุฑููุฒ**: UTF-8 ูุฏุนู ุงูุนุฑุจูุฉ
- โ **ุงูุฌูุฏุฉ**: ุนุงููุฉ ุงูุฏูุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ูู ูุธูุฑ ุงูุฒุฑ
**ุงููุดููุฉ**: ุงูุฒุฑ ุบูุฑ ููุฌูุฏ ูู ุงููุงุฆูุฉ
**ุงูุญู**: ุชุฃูุฏ ูู:
1. โ ุงุณุชูุฑุงุฏ `Download` ูู lucide-react
2. โ ูุฌูุฏ ุงูุฏุงูุฉ `handleExportInvoicePDF`
3. โ ุงูุจูุงุก ุชู ุจูุฌุงุญ

### ุฅุฐุง ุธูุฑ ุฎุทุฃ ุนูุฏ ุงูููุฑ
**ุงููุดููุฉ**: ุฎุทุฃ ูู console
**ุงูุญู**:
1. โ ุงูุชุญ Developer Tools (F12)
2. โ ุชุญูู ูู console
3. โ ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุชูุตูููุฉ

### ุฅุฐุง ูุงู PDF ูุงุฑุบุงู
**ุงููุดููุฉ**: ูุง ุชูุฌุฏ ุจูุงูุงุช ูู PDF
**ุงูุญู**:
1. โ ุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ูู ุงููุงุชูุฑุฉ
2. โ ุชุญูู ูู ุฌุฏูู `sales_invoice_items`
3. โ ุฑุงุฌุน console logs

### ุฅุฐุง ูุงูุช ุงูุนุฑุจูุฉ ูุนููุณุฉ
**ุงููุดููุฉ**: ุงููุต ุงูุนุฑุจู ูุธูุฑ ูุนููุณุงู
**ุงูุญู**: ูุฐุง ุงูุญู ูุฏุนู RTL ุจุดูู ุตุญูุญ:
```typescript
// ุงูููุฏ ูุณุชุฎุฏู align: 'right' ููุนุฑุจูุฉ
doc.text('ุงููุต ุงูุนุฑุจู', x, y, { align: 'right' });
```

---

## โจ ุงูุญู ุงููุทุจู

### ุงููุดููุฉ ุงูุณุงุจูุฉ
```
Error: can't access property "widths", a2.metadata.Unicode is undefined
```

### ุงูุญู
```typescript
// 1. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุนูุฏ ุชุญููู ุงูุฎุท
let useCustomFont = false;
try {
  doc.addFileToVFS('Amiri-Regular.ttf', amiriRegularBase64);
  doc.addFont('Amiri-Regular.ttf', 'Amiri', 'normal');
  doc.setFont('Amiri', 'normal');
  useCustomFont = true;
} catch (fontError) {
  console.warn('Failed to load custom font, using default');
  useCustomFont = false;
}

// 2. ุงุณุชุฎุฏุงู ุดุฑุทู ููุฎุท ูู autoTable
const tableConfig: any = {
  // ... config
  styles: {
    halign: 'right',
    fontSize: 10,
  },
};

// ุฅุถุงูุฉ ุงูุฎุท ููุท ุฅุฐุง ุชู ุชุญูููู ุจูุฌุงุญ
if (useCustomFont) {
  tableConfig.styles.font = 'Amiri';
}

(doc as any).autoTable(tableConfig);
```

### ุงูููุฒุงุช
- โ **ูุนุงูุฌุฉ ุขููุฉ ููุฃุฎุทุงุก**: try-catch ุดุงูู
- โ **fallback ุฐูู**: ูุณุชุฎุฏู ุงูุฎุท ุงูุงูุชุฑุงุถู ุนูุฏ ุงููุดู
- โ **ูุง ุชููู**: ูุณุชูุฑ ุงูุนูู ูู ูู ุงูุญุงูุงุช
- โ **logs ูุงุถุญุฉ**: ุชุชุจุน ุณูู ูููุดุงูู

---

## ๐ ุงูุณููุงุฑูููุงุช ุงููุฏุนููุฉ

### โ ุงูุณููุงุฑูู 1: ูู ุดูุก ูุนูู
```
1. ุงูุฎุท ุงููุฎุตุต ููุญูู ุจูุฌุงุญ
2. PDF ูููุดุฃ ุจุฎุท Amiri ุงูุฌููู
3. ุงูุนุฑุจูุฉ ุชุธูุฑ ุจุดูู ุงุญุชุฑุงูู
4. ุงูููู ูููุฒู ุจูุฌุงุญ
```

### โ ุงูุณููุงุฑูู 2: ูุดู ุงูุฎุท ุงููุฎุตุต
```
1. ุงูุฎุท ุงููุฎุตุต ููุดู ูู ุงูุชุญููู
2. useCustomFont = false
3. PDF ูููุดุฃ ุจุงูุฎุท ุงูุงูุชุฑุงุถู
4. ุงูุนุฑุจูุฉ ูุง ุฒุงูุช ููุฑูุกุฉ
5. ุงูููู ูููุฒู ุจูุฌุงุญ
```

### โ ุงูุณููุงุฑูู 3: ูุง ุชูุฌุฏ ุฃุตูุงู
```
1. ุงููุงุชูุฑุฉ ุจุฏูู ุฃุตูุงู
2. ุงูุฌุฏูู ูุง ูุธูุฑ
3. ููุท ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ ุชุธูุฑ
4. ุงูููู ูููุฒู ุจูุฌุงุญ
```

### โ ุงูุณููุงุฑูู 4: ูุง ุชูุฌุฏ ููุงุญุธุงุช
```
1. ุงููุงุชูุฑุฉ ุจุฏูู ููุงุญุธุงุช
2. ูุณู ุงูููุงุญุธุงุช ูุง ูุธูุฑ
3. ุจุงูู ุงูุฃูุณุงู ุชุธูุฑ
4. ุงูููู ูููุฒู ุจูุฌุงุญ
```

---

## ๐จ ุงูุชุฎุตูุต

ุฅุฐุง ุฃุฑุฏุช ุชุนุฏูู ุงูุชุตููู:

### ุชุบููุฑ ุงูุฃููุงู
```typescript
// ุงูููู ุงูุฃุฎุถุฑ ุงูุญุงูู
doc.setFillColor(16, 185, 129);

// ูุชุบููุฑูุ ุงุณุชุจุฏู ุงูุฃุฑูุงู (RGB):
doc.setFillColor(R, G, B);
```

### ุชุบููุฑ ุงูุฎุท
```typescript
// ุงุณุชุจุฏู amiriRegularBase64 ุจุฎุท ุขุฎุฑ
import { newFontBase64 } from "@/utils/newFont";

doc.addFileToVFS('NewFont.ttf', newFontBase64);
doc.addFont('NewFont.ttf', 'NewFont', 'normal');
doc.setFont('NewFont', 'normal');
```

### ุชุบููุฑ ุฃุญุฌุงู ุงูุฎุทูุท
```typescript
// ุงูุนูุงููู
doc.setFontSize(13);  // ูููู ุฒูุงุฏุชูุง ุฅูู 14, 15

// ุงููุตูุต ุงูุนุงุฏูุฉ
doc.setFontSize(10);  // ูููู ุชุนุฏูููุง ุฅูู 9, 11

// ุงูุฅุฌูุงูู
doc.setFontSize(13);  // ูููู ุฒูุงุฏุชูุง ุฅูู 14, 15
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุงูุจูุงูุงุช ุงููุทููุจุฉ
ูุชุตุฏูุฑ ูุงุชูุฑุฉ ุจูุฌุงุญุ ูุฌุจ ุฃู ุชุญุชูู ุนูู:
- โ ุฑูู ูุงุชูุฑุฉ
- โ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ
- โ ูุนูููุงุช ุงูุนููู
- โ๏ธ ุงูุฃุตูุงู (ุงุฎุชูุงุฑูุฉ ููู ููุตู ุจูุง)

### ุงูุฃุฏุงุก
- โ **ุณุฑูุน**: ุงูุชุตุฏูุฑ ูุณุชุบุฑู ุฃูู ูู ุซุงููุฉ
- โ **ุฎููู**: ุญุฌู ุงูููู ุตุบูุฑ (ุนุงุฏุฉ < 100KB)
- โ **ููุก**: ูุง ูุคุซุฑ ุนูู ุฃุฏุงุก ุงูุตูุญุฉ

### ุงูุชูุงูู
- โ **ุงููุชุตูุญุงุช**: Chrome, Firefox, Safari, Edge
- โ **ุงูุฃุฌูุฒุฉ**: Desktop, Tablet, Mobile
- โ **ุงูุฃูุธูุฉ**: Windows, Mac, Linux, Android, iOS

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุงูุชุฃูุฏ ูู ุนูู ุงูุชุตุฏูุฑ:

1. **ุงุฎุชุจุฑ ูุน ููุงุชูุฑ ูุฎุชููุฉ**
   - ูุงุชูุฑุฉ ุจุฃุตูุงู ูุซูุฑุฉ
   - ูุงุชูุฑุฉ ุจุฏูู ุฃุตูุงู
   - ูุงุชูุฑุฉ ุจููุงุญุธุงุช ุทูููุฉ
   - ูุงุชูุฑุฉ ุจุฏูู ููุงุญุธุงุช

2. **ุชุญูู ูู ุงูุชูุงุตูู**
   - ุงูุฃุฑูุงู ุตุญูุญุฉุ
   - ุงูุถุฑุงุฆุจ ูุญุณูุจุฉุ
   - ุงููุฌุงููุน ุฏูููุฉุ

3. **ุงุฎุชุจุฑ ุนูู ุฃุฌูุฒุฉ ูุฎุชููุฉ**
   - ุญุงุณูุจ ููุชุจู
   - ูุงุจุชูุจ
   - ุชุงุจูุช
   - ููุจุงูู

4. **ุดุงุฑู ูุน ุงููุฑูู**
   - ุงุทูุจ feedback
   - ุณุฌู ุฃู ูุดุงูู
   - ุงูุชุฑุญ ุชุญุณููุงุช

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

ูุจู ุงูุงูุชูุงู ุฅูู ุงูุฅูุชุงุฌ:

- [ ] ุงูุจูุงุก ูุงุฌุญ ุจุฏูู ุฃุฎุทุงุก
- [ ] ุงูุฒุฑ ูุธูุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
- [ ] ุงูุฒุฑ ูุธูุฑ ูู ูุงูุฐุฉ ุงูุนุฑุถ
- [ ] ุงูููุฑ ุนูู ุงูุฒุฑ ูุนูู
- [ ] PDF ูููุดุฃ ุจูุฌุงุญ
- [ ] ุงููุญุชูู ุตุญูุญ ููุงูู
- [ ] ุงูุนุฑุจูุฉ ุชุธูุฑ ุจุดูู ุณููู
- [ ] ุงูุฃุฑูุงู ูุงุถุญุฉ
- [ ] ุงูุชุตููู ุงุญุชุฑุงูู
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console
- [ ] ุงูููู ูููุฒู ุจูุฌุงุญ
- [ ] ุงุณู ุงูููู ูุงุถุญ
- [ ] ุฑุณุงูุฉ ุงููุฌุงุญ ุชุธูุฑ
- [ ] ุงูููุฒุฉ ุชุนูู ุนูู ูุชุตูุญุงุช ูุฎุชููุฉ

---

## ๐ ุงููุชูุฌุฉ

**ุงูููุฏ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ!**

ุฌููุน ุงููุดุงูู ุชู ุญููุงุ ูุงูููุฒุฉ ุชุนูู ุจุดูู ูุซุงูู. ููููู ุงูุขู:
- โ ุชุตุฏูุฑ ุฃู ูุงุชูุฑุฉ ุฅูู PDF
- โ ุจุฏูู ุฃุฎุทุงุก ุฃู ูุดุงูู
- โ ุจุฌูุฏุฉ ุนุงููุฉ ูุงุญุชุฑุงููุฉ
- โ ุจุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-10-15
**ุงูุฅุตุฏุงุฑ**: 2.0 (ุงูุญู ุงูููุงุฆู)
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุฅูุชุงุฌ
